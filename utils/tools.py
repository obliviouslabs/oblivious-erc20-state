import rlp
from eth_hash.auto import keccak

rlpd = lambda x: rlp.decode(bytes.fromhex(x.replace("0x", "")))

v = rlpd("0x01")
print(v)

print(keccak(v).hex())

addr0 = ("0xf90211a0f4a7355f4bb1f758aac1447eb3ca34400eb28ef38252bb67c9fdd8c14d600b6fa054964854339f13bd4deeddc343626906ca36499a8acb76f8330be9a4e42b3b11a0c194ee0bd2c81ef04119795cb06043a9709cb876e00f865327a9a579e60c2376a0cb5cda23e0fba22427b5f031b78520b7cd14a80e3b9f3b537f441f660cda39fda07b114a2e143b1a30a935465816c5b8159137ac4bd051e1da2ab5026c65b7b873a069726d66fb6e579158e70902a7fcae997e0d73af903121ba70a68c521a7ca742a073f789e3cbe796a1b61607a1d8de69c33a7e5283c9840a6e7128302cdcee6c9ca0dd1f03fa70cc0ccbffed01a5167cc5f11ba8ff07e62f085e21b021e0a4cee300a01c423cfb5388d06eb2717670f0c490519ccae88f40af9d844eadb1408efe3c60a0f7a91ab951e6cefd330abbf6053521b707c0502f0f2ca57843f33074ef4f5a1ba09b6c7c6eb81e43409b107cff09ae700a308e022b846462e5514fdb0760c5221da0a4d173a46b9efde5a0985e948a13b7e23e341e561636c3efb137bf393857667da0c9e83995e2edc4b0bb5627c9a964d529300757cd3ed3077bcb630649ffb23b53a0b4cabaaeb6e1b5144dfb80bdbc78580bd1339b1c61d74b2ab9ddd8047a258f4fa034cd7d0280c82975a3f2076d1d6feaee50c500cdf5ef12ef9c477bf9f8e42c62a01e9edb1d0ccab3560eed53b41274405c11a9f0bff8e565e90a224def2a5b791880")

addr1 = ("0xf89180808080a0473494535e1ffd9c57a7c861680e64db76645b4aa264b7920ac3211626be38aaa0dbca43d1338ac6921c77735bf4aa207f9cc78e35e568d14f34e324e9c08d0cac80a00cf588fafc81dcbb44b3b951e00e6068ecc8129187d1f8fc45222cf4a2100daa8080808080a0bc95e5f76e416cf0da7fca5c358c636635c803f105a8942935ed9b719a00ba42808080")

addr2 = ("0xf87180a04dc98e70afb4bf380f42d751eb0a8ed098ac6fcba59bd86cd85cde0507bd76798080808080a025cda26cf6b3b8211168310a1cff8305a0ff0fc7c1e5f2c02005f877affedfe8808080808080a004ae9768069fb7e17260edc6654a7db99d01b532b779fce1912c77ea2ed0e7b28080")

addr3 = bytes.fromhex("f59e3cd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5639594c6cde7c39eb2f0f0095f41570af89efc2c1ea828")
# addr3 = (b"\x87\x05T=\xf7)\xc0\x00")
"1134972014892877928712953364190483482895670224936"

def parse_node(v, parse_hex=True):
  print("====================================")
  if parse_hex:
    v0 = v
    v = rlpd(v)
    v0 = bytes.fromhex(v0.replace("0x", ""))
  else:
    v0 = v
    v = rlp.decode(v)
  print("h:", keccak(v0).hex())
  if len(v0) == 32:
    print(f"val: {v0.hex()}")
  if len(v) == 2:
    print("A")
    print(v[0].hex())
    print("B")    
    print(rlp.decode(v[1]).hex())
    print("C")
  elif len(v) == 17:
    for i, node in enumerate(v[:-1]):
      if node == b"":
        print(f"{i:x}: NULL")
      else:
        print(f"{i:x}: {node.hex()}")
    print(f"val: {v[-1]}")
  else:   
    # print(v) 
    print(v.hex())

parse_node(addr0)
parse_node(addr1)
parse_node(addr2)
parse_node(addr3, False)
# print(len(addr0))
# for v in addr0:
#   print(v)

print(addr3)

'''
Storage value at slot 0: EIP1186ProofResponse { address: 0x413d0f3858a04583772bd6cb2b8ef50c89db4100, balance: 0, code_hash: 0xf3939aab51fd26e8e58bbc26920280420186bf09cc9e988f008dd7b9701553af, nonce: 1, storage_hash: 0xac0dd2c1c9c0fe9d10e1abf966660131c249f869319c8371ac96a80b51404c31, account_proof: [Bytes(0xf90211a067b6eacdb802b2f841d7a44c71938903929b16653a6a70d3ac3032cac72dd562a03b4d265016bc470c502eb3567d643db06fdc69d4d2dc8a3334272dbb29386e00a09ce2a1595514f7e9eec65912b6aa1e030e81ad08ca2b244f231cfba0c6fb2b18a0d1aa62af6f5c3e3a4f9381aae12f34e5a43df491e0e1661e8d7e0eb483ab66aba0a7a7b9c873a658c1293dc9c9a099f88db0c0d1a369d55471f1d24c2f3bc25e1aa02707f4884be67a433a6011bfe58ed007ce32dd6e44af8ba71d1f818245e856aaa046a1d24a91050cf716c8bf6ef7ff2d29e29bb8c53a6e0edf4ec7d58a561b62e2a00948c24bf2bacf3376507b0e7564e777a38b6934b4d786a477883f3a8c7da509a063066653d49fda7ba6855ab4a340da7e1f4aab0ee984f6770d95eef6b85c74a7a0caab907d58da8f14219a7cecf0f23ff5027eecc769c3f4ca4a0110c6395ec524a0be11ac12d6585e0b2da26abf0a3c87f4f2c6f1413133324f07c06dfd9470850da02509f0141d3e8d2377552f4d8682157cbfd3dcdec6d335d6c3f733a9fb7acc08a0cbf523099c164089fab293db5f4e26c40a8f3c57ecb5e4a5083742706cb6a731a05fcab25bcd428ecf6d7a8e75c573c259d63e0730e60a3841437de548c27c9d04a01f967555cfc4164a055c4eb2115a313097fd60a0176dde737d909493a9efe8fda0d5be3351e10e0e6f8d0b59d51e697241272e96bfda4d719829e161a02d98bfff80), Bytes(0xf90211a0a90d093f359399a76a228212068a55f4f97307ed0cf6c6e8d766bbaad8d01699a0b5cd1df9759a6bb7dc8e66d36afe4e3192c68af5ae63d2b8b32cc467fc606370a03d55de73726f23825a9cd4cba1e09f705004b251385a8c4a7e262d715a023905a09480ca9398e0699803607ec347a6c53373c208f3876dee9a8cf5802e4afe99cca02f4db58d853e83a564dfddc0bca9db596fa5f3d70f85c172c084994a25415c26a0b62eb77b325e25142fa1fac921b4aa313cd4df3425f0a67c01fa2e8b01bee174a0f6f473e828af015baa4bb0bcd851b534a11a7b7e00c313f32f9c0c42f113b36ca0a7ea8d2fb2556da340a35b5d4626972b7e5cf6cf85f7a591e72c89bb19b20a43a0e7b69ecb79eff986508a2fb3c0a41e0b816c4c76b8cb30a730dec29100b79693a0b725010c38a1bcce9f8a4cea3dd22a9e453e85aca07c4cefee04190cf7dae7d7a088ba497cf32a779f406d45b51c134e9d7c453c2d304eeb2e5afc52c56a823a9ba0aa815a0e16337c915e36cfb27f5c671dc369535b33c4d84d31c7c06d277bfab0a05d32b82adb21e85f7974e151c33d877b0fddd261a06fe9d6f8e11706ef175d46a08e196824b5422aac69fa2be2e01938dc7e6f1e5f86fdd127fc89614a4bda7f8ea030957063d2473f91d20866d9e827b3157d65500c14b3cf4c460a5c0bd903629aa067bf32df5e1bb71f6eba3bf0288315cf88f49a3951b970c1e32b4318fe3fd68e80), Bytes(0xf90211a05f0a1743f5da8e76954c4305ba8c9d6c1f2722a0672caa197ace64d1b0c4dfa7a064fc5144922209aa0f643ad3c1b573111ff442d6caf2be63b9940687b2d0e1dea046b0f64f79c3085ffb7007fb5d3fa4294421234b31237a48230ab17e98957186a0a383ba4515dfac070ab0de39b6ae08f1df28258afd35ab56dd031be461194618a0aa544839665fd7a723fec96d18e5a9d77c51b8e0fe1c42ac85fcca9c00bc3a26a092b8c9feadbf71a2315c3b900853049d3b6ff71e6380c27482a783168f3da2eea0b10f46836ce18a3f90e60c5d4952b4ee2468cf72677cdfa90f3ef11be54f83cea0cd263ca883339b5dfae5cc61c9eb39da0f3e0d7a1d8e12a5aa3beb2cc9841a6ba0c49ecbac2ccc0a9edf0c393f30168f84caed908379bee42a39f7c558812284e6a0c650674b091b3446ec27312c5a493ff815710997f126188d3d07150074ee5c9da062a24830898e5442c1e343881a09570c941d30bd8469896ab4ada509dc2b5d16a0da1f00683876d15269dcebcb5f2c82e8bdc653d8783c93aa88e7d777aa0d1584a0812288b5d86b56acc108d439a154fe642201391eb17fe23e21a48f0a517c2f4ca0fd64a8dcbc7ba261aa8c34fa31597592b478b06fd278a583ac046348c8964c75a0021c3a0920a73ebfc8a8cac51a849a96660beca86be0cfa82e97d2abf99e72dda0d378fbb8ec98d834a5dae02ea15beab5b7c62bc131c6b5811afcf831d99a63ef80), Bytes(0xf90211a0fe381cf2f5cc453f0c3d3c99149c631b0537ab3e3c661eddcccd83b1945d8248a07dbf146896dbd7a26df5d5e965b0d7fd64da8d41a92668c7121021010c5ef51ba010a861dec3edccfcada5c3ae622593851c30b7aeddc7cdda7ed24fec86b932aea0bc16484bfe89b2095e516bfb2d6bc57f0da10fd986bf2c3b976f593077554feca0b80fe7d18dae9271ebcc7122b8342056d0ec7f09afab5e89b7ccbbd1d0a79642a0a8f5931541b1cb63cabd46e69cabb73e2feb5f75e9ab7624a3d8e58c21833277a0e8f3cffca8decee092030c9e786d427a563ba8b4e3044cb36e5353035286b587a0e8fafbe5b19750e5121b83b865aa993b51c8fc2baf33cbc261961640ead58443a09fe2e3f19fde7b601f43af2abdaf70e386ab62e15a52d470d44721473a847de4a0a106fed9e73b75bc9f67baad4d1fc844d1acfdf6b679f9707449b5dcc6c61d19a0e7d97858d79792cf907e7039488beec679cc4235a19d355a2b018d56e1f5ef35a0325ce1c30b9d8c3efb54f9339b8cf3fe031cc37823d8a8fb45888a84334dfb54a0a89e16ac21dccaf7f64201e49ff06bb3b2b3684eac83ee26e4f6cbd7dd961709a0f75c9a63b10426ebb171b5f317ea516378bbd7e3e6110d406c32e0bb22e3f4a9a0fc1e7f65b917a5f0a757f42b708cd941529b9a0276eb28b0515296c7f4c715baa0aaf6d9b5da414cb5c1f08a4cc900a6a5f3d1b1b2b0e57568ef883aaefd9db9b780), Bytes(0xf90211a0eb5b9b679c0a276a8952c95d454bbdd451682c8af90fe54928cfd0961cf2efdca0c66c67c41e4049771df21ecd31337f88cf38b854db5377530624e672c58aa2cea05797aff67c33cbd52274f2795dc58cf1c11de5ae2c3ed9be54cd3a6874f72a79a0dd6772f14d428e4437f152e769a24f70f8e58ba1f257e0b2f179b8d97343e062a07fba257de24770dc1268bcee244ad4c646f48fe5f8c24d73847bff6511b2a0daa02f5221a2b2ade3bd25122a5d45f2375b905ae2947904160c3327511d872a62afa0c3d2433a7d0d80e6ab1ebd543189eae59ca4e88ffa63e2bd1f3f12596615adf5a0bcc574531b49a82c0a19721f0923d53830bb378fe8fb3b9e6de0385b852a258ba0a98586026f0eaab66e85a06a315e6df71d867abba0ed9920fa8e8e54e499a34ba02b5699c42fe087b77b5996ef6c46776fd2976bd61abcb19e0a35107465dc4c96a023fd5030704e06524d0deb898025a2487099083d5cf272747e86bc65ee0f5cd1a0c51ffdaea13cb2b47e66e42cb96d35f6411e2f296ecc98159a3e2691022fe665a076ba4bfbabfff4dc712e1d82c349e4bf5f69b4e85cbb5124dbafb7c0e9e54d60a0f9b6406bf894485ba5ca9387e4dc2c2b42b93b73a04ff145b8b84c27c38ed48da0e5912a6c6e82a57ba9cd3d2f8ff2c3b705ee89fb4b9c62acd5b209195af1cf3ba03abf778b83216667b5379a755944edf9f66516f04a1af1c2604a2cf95593dfd980), Bytes(0xf90211a03d43a4c55d62ad9ed9335c90db80705883e1050c0d614111dec1e4ede45bff24a031251354040a81387d63ad8ca5b71f8648cbca77294680436bd41369ab25410da026fd8eedb5074e1f0225dea242c07a5f16c16c21370846e23dd2e2d5d82af84aa06de4854b5b195b95f5369944afc67e8e40f9fe864f3ae6644f39b7d938d93225a0053a75558e34e417e2266235a629d4857bf1a68964cc5d54131def3fb7fb6975a0f49aec55492eee0537ccd3e55240039b47928531e10e300c9c4b0baf0bdf4b17a06f9a5d6c6cfcc471c5f4e2dab992d6451a5e61967cd5318a577899d7546c3087a0e34cc3dc099296776212e2c1a809ea2ce00b4e946e346fd5ec71facb94d6e2dda0cee061e85f8fb1564cbd22795a437831e7a3c4883fdc3265ffc419e8bc4dd00da08095c3186ed1931e6275751870e606c15fe0237d1997cb4070c9e94a9e3ab5c5a02cf15e852e0eb00c04943da476709286947bd2f3c6ef7dfb833f228aac361189a0000fca9dede4f44e8d20088ceeb345f06ff175c2b9ae45100948362c7188dbeda0c96860d070027daf69e9be208946d53d28a4a7ef58ebb0d682171ee3b93aa302a02b908f43e3973f631a20a501da86b8106c4eee52f65c4f293f711470dc3d53a2a0e60cfba45e5e5053839b4567621d3a54d612330ba1da7010908a714eeb07f699a0c805d6663881c5bde6ff89c2b61dc4de3be2b4b45162a5cf2b6ff3deedc5bcc180), Bytes(0xf8f1a018e747f507faac2cdd9e3d83584257846a266ed95a44ba465b2d1d8e81f8cc99808080a054af00ac1b8a63fa22c35dedfb913e3dd4b162a602706bbd0cacb3e9e235429c80a00290b093b0c80bab084d25fd59b50421252d739e73c6f1dae76780a8a34ac6d78080a08a59edeed8127d81b3e7769431de8bd14f94bc9818f8e5044116133d8e0fc16f80a058aa333b57d13350f7ac357a645423475c1d3fe8b6d761695895b294dd2a6a92a0b248670f9b7c2895afb0315724cb3fc6bec59b45f4c3e3487c53f7d7586a7abc8080a026fd334b24c26e608a79a06519df8e651fac8209c010111ffce9aa4cbbaf202e80), Bytes(0xf8669d338e7968645a3dea10b9c2dbeeb143f8772d46554567f57ee3506fc53db846f8440180a0ac0dd2c1c9c0fe9d10e1abf966660131c249f869319c8371ac96a80b51404c31a0f3939aab51fd26e8e58bbc26920280420186bf09cc9e988f008dd7b9701553af)], storage_proof: [StorageProof { key: 320942611, proof: [Bytes(0xf90211a0ad531f50d3457cfc52954bb3d620d2fbfeee3d616bb141213dbc060ccad29cfaa07a19cfc8237a3918c3fb8bdf96a48c545573735645ff36631a7459af90ceceb7a0645af9cef60e9dd277ddcc9c5b0d1363ffc48f762a70628b344e8ffc0a66e0e3a03ba38869e07256245fc56a1ec9df9f03cb1ade39dec1c66d35bc14098b3029eaa04871d4c78c93cdee52f50927ed8b01d96d725ccdc2b724cc04ee86b8143c669ea0989abbded358ad35b4260c361ad3ccefe22b4b49e5821400f3401756ed9ee4c0a09c4289e9b6b071e517d6005f491442122fa7b1d0919ddd596655a3eb68cac2a0a058315c44aa26bd03da5422be05badfd55dbd243e5ea6d18c913e1a10eecdbe20a0fbf356a78c0f2f007e879c636b4dd8a40b309a65235c4ad6a0e46fa2fcb3982ea0705131a37457f200a3045706a0d96baa1914a4b291e5bc7d31be87abc34f58ffa05fc3f8c798202069b8f3e92a73ebe2d1f4dcee9ffd74fed8c11ada566138464da07fc2ffc719a5143bc7b274ab79563ba9763653b598b62f7e3e962d3e525ad440a08c2368d514bd9dce8a705002cb43f453bfbd5697c3d2c87debb1994257fc8d59a0ad49815ad586664427ffbb8d7c82577f99bc7e51bc9c4c03529ea519d4021331a0b6224e1554b16f54c9ced7624fb0f436e13ef5e04c1589b438bb06ff3e21eaa8a0bab815d40c43849e3880b1365d217efd1313540faab5fffc83ba000c5ad29ef580), Bytes(0xf8f180a00dd6289deb60d6e2cc56151efdc43d8a4e6ce4438c75d03a37c61403e2b13e92a05c6fa803f8c237a5553c05b12f8cae43a1674d136af35fa3d5d248c46f426f2aa001c850750304fc1bddf8fbc4cf442d86ced80db181481f36749b2e820592d01280808080a0a181abb3ec20cfc10d8c77988025665b54140ab41b4663f72848d3d64e20a58ea0b70efd2398c50bead64fd4896de4b9921cfa5914c9cb9df80bf9f2e132fe2dd0a023edf90b14b6e990198e05f08de2074afd47a895c93c3b499cab8178426762df808080a07ada0d513839c11186d585a4bea7615179f2b312bc783c2c2ea6480d90f089548080), Bytes(0xeaa020e3ed313601ff3db1de7f01bd9caeeadb9aaefe650f8b5cf311fe85556bb41888870981ac4df3b302)], value: 0 }] }

'''